<!-- Rooftop Urja Shared Header -->
<link rel="stylesheet" href="/common/header.css" />

<header class="main-header">
  <div class="navbar">

    <!-- Logo + Title -->
    <div class="navbar-logo">
      <img src="/assets/logo.png" alt="Rooftop Urja" class="logo-img" />
      Solar Plant Dashboard
    </div>

    <!-- MENU -->
    <ul class="navbar-menu">
      <li><a href="/meter.v2.html">Meter</a></li>
      <li><a href="/inverter_analytics.html">Inverter Analytics</a></li>
      <li><a href="/inverter_data_overview.html">Inverter Data Overview</a></li>
      <li><a href="/inverter_faults.html">Inverter Faults</a></li>
      <li><a href="/maintenance.html">Maintenance</a></li>
    </ul>

    <!-- ACCOUNT -->
    <div class="user-dropdown">
      <button class="user-btn">Account â–¾</button>
      <div class="dropdown-content">
        <a href="#" id="profile-link">Profile</a>
        <a href="#" id="logout-link">Logout</a>
      </div>
    </div>

  </div>
</header>

<script>
(function () {
  const logout = document.getElementById("logout-link");

  if (!logout) return;

  logout.addEventListener("click", (e) => {
    e.preventDefault();

    console.log("ðŸ”’ Logging out user");

    // 1ï¸âƒ£ Clear OTP auth
    localStorage.removeItem("urja_token");

    // 2ï¸âƒ£ Clear SWA session (important)
    fetch("/.auth/logout", { method: "POST" })
      .catch(() => {}) // ignore errors

      // 3ï¸âƒ£ Redirect to login
      .finally(() => {
        location.replace("/login.html");
      });
  });
})();
</script>
